<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/css/materialize.min.css">
        <title>Customer Manager</title>
        <script src="https://www.gstatic.com/firebasejs/4.9.0/firebase.js"></script>
        <script src="https://www.gstatic.com/firebasejs/4.9.1/firebase-firestore.js"></script>
    </head>
    
    <body>
        <!-- NAVBAR -->
        <nav class="nav-wrapper green">
            <div class="container">
                <a class="brand-logo" href="/dashboard">Service Tool</a>
                <a href="#" class="button-collapse"><i class="material-icons">person_add</i></a>
                <ul class="right hide-on-med-and-down">
                        <% if(!currentUser){ %>
                            <li><a class="email white-text" href="/login">Login</a></li>
                            <li><a class="white-text" href="/register">Sign Up</a></li>
                        <% } else { %>
                            <li><a class="white-text" href="#">Signed In As <%= currentUser.username %></a></li>
                            <li><a class="white-text" href="/logout">Logout</a></li>
                        <% } %>
                    </ul>
                </div>
            </div>
        </nav>
        <div id="new-customer" class="box">
            <div class="container-fluid">
                <h5>Customer Creator</h5>
                <p>* indicates a required field</p>
                
                <div class="row">
                    <div class="input-field col s6">
                        <input id="firstname" type="text"></input>
                        <label for="firstname">First Name*</label>
                    </div>
                    <div class="input-field col s6">
                        <input id="lastname" type="text"></input>
                        <label for="lastname">Last Name*</label>
                    </div>
                </div>
                
                <div class="row">
                    <div class="input-field col s12">
                        <input id="street" type="text"></input>
                        <label for="street">Street Address</label>
                    </div>
                </div>
                
                <div class="row">
                    <div class="input-field col s4">
                        <input id="city" type="text"></input>
                        <label for="city">City*</label>
                    </div>
                    <div class="input-field col s4">
                        <input id="state" type="text"></input>
                        <label for="state">State</label>
                    </div>
                    <div class="input-field col s4">
                        <input id="zip" type="text"></input>
                        <label for="zip">Zip Code</label>
                    </div>
                </div>
                <div class="row">
                    <div class="input-field col s6">
                        <input id="phone" type="text"></input>
                        <label for="phone">Primary Phone Number</label>
                    </div>
                    <div class="input-field col s6">
                        <input id="altphone" type="text"></input>
                        <label for="altphone">Alternate Phone Number</label>
                    </div>
                </div>
                <a href="/dashboard"><button type="text" id="addbtn" class="btn">Add</button></a>
                <a href="/dashboard"><button class="btn grey">Cancel</button></a>
            </div>
        </div>


        

        <script type="text/javascript" src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/0.100.2/js/materialize.min.js"></script>
        <script>
        

            // Initialize Firebase
            var config = {
            apiKey: "AIzaSyALt3V0U_9A6DZBmducVWvAchE3XUG6qdY",
            authDomain: "vuefs-cust.firebaseapp.com",
            databaseURL: "https://vuefs-cust.firebaseio.com",
            projectId: "vuefs-cust",
            storageBucket: "vuefs-cust.appspot.com",
            messagingSenderId: "464183442563"
            };
            
            firebase.initializeApp(config);
            var db = firebase.firestore();
            var customerCollection = db.collection("customers");
            
            
            var addbtn = document.querySelector("#addbtn");
            
            var inFirstname = document.getElementById("firstname");
            var inLastname = document.getElementById('lastname');
            var inStreet = document.getElementById('street');
            var inCity = document.getElementById('city');
            var inState = document.getElementById('state');
            var inZip = document.getElementById('zip');
            var inPhone = document.getElementById('phone');
            var inAltphone = document.getElementById('altphone');
            
            var data = {
                firstname: "",
                lastname: "",
                street: "",
                city: "",
                state: "",
                zip: "",
                phone: "",
                altphone: "",
                cnotes: ""
                }
                
            addbtn.onclick = function saveCustomer() {
                data.firstname = inFirstname.value;
                data.lastname = inLastname.value;
                data.street = inStreet.value;
                data.city = inCity.value;
                data.state = inState.value;
                data.zip = inZip.value;
                data.phone = inPhone.value;
                data.altphone = inAltphone.value;
                createDocument(customerCollection, data);
            };
            
            function createDocument(collection, document) {
                //Add a new document with a generated id.
                collection.add(document).then(function(doc) {
                Materialize.toast('Customer Created!', 4000, 'rounded');
                })
                .catch(function(error) {
                console.error("Error adding document: ", error);
                });
                }

                
            
        </script>
        <style>
            body {
                  font-family: Arial, sans-serif;
                  background: url(http://www.shukatsu-note.com/wp-content/uploads/2014/12/computer-564136_1280.jpg) no-repeat;
                  background-size: cover;
                  height: 100vh;
                }
                .box {
                  width: 50%;
                  margin: 0 auto;
                  margin-top: 3em;
                  background: #fff;
                  padding: 35px;
                  border: 2px solid #000;
                  border-radius: 20px;
                  background-clip: padding-box;
                  text-align: center;
                }
                .button {
                  font-size: 1em;
                  padding: 10px;
                  color: #fff;
                  border: 2px solid #06D85F;
                  border-radius: 20px/50px;
                  text-decoration: none;
                  cursor: pointer;
                  transition: all 0.3s ease-out;
                }
                .button:hover {
                  background: #06D85F;
                }

                .box-white-text {
                  color: white;
                }

                @media screen and (max-width: 700px){
                  .box{
                    width: 70%;
                }
        </style>
</body>
</html>
